function Note(t,a,e,s){this.id=t,this.timeout=null,this.notation_scale=a,this.default_note=e,this.already_post=s;var n=this;jQuery("#notation-"+n.id+" .stars").mouseover(function(){clearTimeout(n.timeout),n.timeout=null}),jQuery("#notation-"+n.id+" .stars").mouseout(function(){null==n.timeout&&(n.timeout=window.setTimeout(function(){n.change_picture_status(n.default_note)},50))}),jQuery("#notation-"+n.id+" .stars .star").click(function(){var t=this.id.replace(/star-([0-9]+)-([0-9]+)/g,"$2");n.send_request(t)}),jQuery("#notation-"+n.id+" .stars .star").mouseover(function(){var t=this.id.replace(/star-([0-9]+)-([0-9]+)/g,"$2");n.change_picture_status(t)})}Note.prototype={send_request:function(t){var a=this.id,e=this;0==NOTATION_USER_CONNECTED?alert(NOTATION_LANG_AUTH):(jQuery("#notation-"+a+" .stars").after('<i id="loading-'+a+'" class="fa fa-spinner fa-spin"></i>'),jQuery.ajax({url:"",type:"post",data:{note:t,id:a,token:TOKEN},success:function(){jQuery("#loading-"+a).remove(),1==e.already_post?alert(NOTATION_LANG_ALREADY_VOTE):(e.default_note=t,e.already_post=1,e.change_picture_status(t),e.change_nbr_note())}}))},change_picture_status:function(t){for(var a,e,s=1;s<=this.notation_scale;s++){var n="star-"+this.id+"-"+s;e=s-t,e>=1?a="fa star star-hover fa-star-o":.5>=e&&e>0?a="fa star star-hover fa-star-half-o":t>=s&&(a="fa star star-hover fa-star"),jQuery("#"+n)&&(jQuery("#"+n)[0].className=a)}},change_nbr_note:function(){var t=jQuery("#notation-"+this.id+" span.number-notes").first(),a=parseInt(t.text())+1;t.text(a),jQuery("#notation-"+this.id+" .notes span:not(.number-notes)").text(a>1?NOTATION_LANG_NOTES:NOTATION_LANG_NOTE)}};